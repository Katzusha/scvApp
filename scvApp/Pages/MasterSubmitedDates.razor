@page "/Master/Submited-dates";

@inject Services.ISubmitService submitservice;
@inject Services.IDateService dateservice;

@using Models

<nav class="navbar-master">
    <div class="container">
        <a href="/Master/All-dates" class="left-button"><div style="margin-top: 12px;">ALL<br />DATES</div></a>
        <a class="welcome-container">SUBMITED DATES</a>
        <a class="right-button" href="/Master/Sub-admins"><div style="margin-top: 12px; margin-left: -170px;">SUB<br />ADMINS</div></a>
    </div>
</nav>

<div class="fullscreen" style="background-color: #ed1164">
    <div class="fullscreen-table">
        <table>
            <tr>
                <th style="width:calc(100% / 6);">Name and Surname</th>
                <th style="width:calc(100% / 6);">School</th>
                <th style="width:calc(100% / 6);">Email</th>
                <th style="width:calc(100% / 6);">Phone number</th>
                <th style="width:calc(100% / 6);">Number of students</th>
                <th style="width:calc(100% / 6);">Date and Time</th>
            </tr>
            @foreach (var submit in submits)
            {
                <tr class="td-row">
                    <td><p style="border-radius: 15px 0px 0px 15px;">@submit.Firstname @submit.Surname</p></td>
                    <td><p>@submit.SchoolTitle</p></td>
                    <td><p>@submit.Email</p></td>
                    <td><p>@submit.PhoneNumber</p></td>
                    <td><p>@submit.NumberOfStudents</p></td>
                    <td><p style="border-radius: 0px 15px 15px 0px;">@dates.FirstOrDefault(vardate => vardate.Id == submit.Date).Term - @dates.FirstOrDefault(vardate => vardate.Id == submit.Date).Start</p></td>
                </tr>
            }
        </table>
    </div>
</div>

@code
{
    List<Submit> submits = new List<Submit>();
    List<Date> dates = new List<Date>();

    protected override async Task OnInitializedAsync()
    {
        dates = await dateservice.GetAllDates();
        submits = await submitservice.GetAllSubmits();
    }
}